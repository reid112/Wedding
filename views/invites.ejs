<%- include("authHeader") -%>

<div class="main-container">

	<section>
		<div class="container">
			<div class="row">
				<div class="form-error">
					<span>Something went wrong and the email was not sent</span>
				</div>
				<div class="form-success">
					<span>Sent!</span>
				</div>
			</div>
      <div class="row">
        <p class="bold col-sm-12">
          Invite List:
        </p>
      </div>
			<div class="row">
				<ol class="col-sm-12">
          <% invites.forEach(function(invite) { %>
            <% const rsvp = (locals.rsvps) ? locals.rsvps.find(rsvp => rsvp.guid === invite.guid) : null %>
						<% const hasRsvpd = (rsvp) ? true : false%>
            <li><% if (hasRsvpd) { %>&#10004; <% } %> <%= invite.names %> | <%= invite.email %> | <%= invite.number %> | <a href="<%=host%>/invite/<%= invite.guid %>">View Page</a> | <button type="button" name="sendInvite" class="btn-link send-invite"><input class="guid-hidden" type="hidden" value="<%= invite.guid %>" />Send Invite</button></li>
          <% }); %>
        </ol>
			</div>

      <br/><br/>

      <div class="row">
        <div class="col-sm-12">
            <button type="button" name="sendInvites" class="send-invites">Send Invite Emails</button>
        </div>
      </div>
		</div>
	</section>

<%- include("footer") -%>
